select * from users;
select * from images;
select * from comments;
select * from likes;
select * from followerssample;

select * from followerssample;

CREATE TABLE followerssample (
  id INTEGER PRIMARY KEY,
  user_id INTEGER NOT NULL,
  followers varchar(30) NOT NULL,
  followers_id INTEGER NOT NULL
);

CREATE TABLE followingsample (
  id INTEGER PRIMARY KEY,
  user_id INTEGER NOT NULL,
  u_following varchar(30) NOT NULL,
  u_following_id INTEGER NOT NULL,
  FOREIGN KEY(user_id) REFERENCES users(id) ON DELETE CASCADE,
  FOREIGN KEY(u_following_id) REFERENCES users(id) ON DELETE CASCADE
);

ALTER TABLE followerssample
ADD FOREIGN KEY(user_id) REFERENCES users(id) ON DELETE CASCADE,
ADD FOREIGN KEY(followers) REFERENCES users(u_name) ON DELETE CASCADE,
ADD FOREIGN KEY(followers_id) REFERENCES users(id) ON DELETE CASCADE; 

CREATE TABLE userfollowing(
id INTEGER PRIMARY KEY,
user_id INTEGER NOT NULL,
u_following varchar(30) NOT NULL,
u_following_id INTEGER NOT NULL,
FOREIGN KEY(user_id) REFERENCES users(id) ON DELETE CASCADE,
FOREIGN KEY(u_following) REFERENCES users(u_name) ON DELETE CASCADE,
FOREIGN KEY(u_following_id) REFERENCES users(id) ON DELETE CASCADE
);

DELETE FROM followerssample WHERE user_id = 1772;

CREATE TABLE likes (
  id INTEGER PRIMARY KEY,
  u_id INTEGER NOT NULL,
  image_id INTEGER NOT NULL, 
  FOREIGN KEY(u_id) REFERENCES users(id) ON DELETE CASCADE,
  FOREIGN KEY(image_id) REFERENCES images(id) ON DELETE CASCADE
);



ALTER TABLE users
ADD profilepic longblob;

CREATE TABLE users (
  id INTEGER PRIMARY KEY,
  u_name VARCHAR(30) NOT NULL,
  email VARCHAR(255) UNIQUE NOT NULL,
  mobile INTEGER NOT NULL, 
  u_pswd VARCHAR(255) NOT NULL
);

ALTER TABLE images
ADD filedata longblob;


CREATE TABLE images (
  id INTEGER PRIMARY KEY,
  user_id INTEGER NOT NULL,
  filename VARCHAR(150),
  filetype VARCHAR(150),
  FOREIGN KEY(user_id) REFERENCES users(id) ON DELETE CASCADE
);

ALTER TABLE users
MODIFY COLUMN mobile VARCHAR(11);

 ALTER TABLE images
ADD filedata longblob;

ALTER TABLE followerssample
ADD CONSTRAINT unique_combination UNIQUE (user_id, followers_id);

CREATE TABLE comments (
  id INTEGER PRIMARY KEY,
  user_id INTEGER NOT NULL,
  image_id INTEGER NOT NULL,
  u_comment VARCHAR(300) NOT NULL,
  FOREIGN KEY(user_id) REFERENCES users(id) ON DELETE CASCADE,
  FOREIGN KEY(image_id) REFERENCES images(id) ON DELETE CASCADE
);